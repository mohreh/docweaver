{% extends "base.html" %} {% block content %}
<main class="container mx-auto flex flex-row relative">
  <aside class="mt-8 p-4 border border-gray-200 rounded-lg h-fit fixed w-1/6">
    <nav>
    <ul class="flex flex-col gap-4 sticky top-0">
      {% for item in sidebar %}
      <li
          class="
                 {% if path == item.path %}
                 font-bold
                 {% endif %}
                 "

        ><a href="{{item.path}}">{{item.title}}</a></li>
      {% endfor %}
    </nav>
  </aside>
  <div class="w-3/5 markdown-content px-12 mx-auto">
    {{ content|safe }}
  </div>
</main>
<script>
const articleContainer = document.querySelector("main");

const headings = articleContainer.querySelectorAll("h2, h3, h4, h5, h6");

if (headings.length > 2) {
  const details = document.createElement("div");
  details.setAttribute("class", ""); // You can use any class name you want
  
  headings.forEach((el) => {
    el.id = el.id || el.textContent.toLocaleLowerCase().replace(/\W/g,"-"); // Create IDs if missing - optional
    const p = document.createElement("p");

    // Add a class to the p tag with the heading like "toc-h2"
    p.setAttribute("class", "" + el.tagName.toLocaleLowerCase());
    const a = document.createElement("a");
    a.setAttribute("class", "");
    a.textContent = el.textContent;

    // Add a link to the section in the text
    a.href = "#" + el.id;
    p.append(a);
    details.append(p);
  });

  // Add the table of contents to the beginning of the article
  articleContainer.append(details);
}
</script>
{% endblock %}
